{"version":3,"sources":["webpack:///./src/static/styles/rank.scss?a2e5","webpack:///./src/static/styles/rank.scss","webpack:///./src/containers/Rank.js"],"names":["content","__webpack_require__","module","i","options","hmr","transform","insertInto","undefined","locals","exports","push","_react","RankList","props","_classCallCheck3","default","this","_this","_possibleConstructorReturn3","__proto__","_getPrototypeOf2","call","state","loading","myRank","datas","users","last","loadMore","needLoader","query","keywords","from","from2","size","loaded","tab","loadMoreData","bind","loadData","switchTab","requestObj","isLoadMore","cb","_this2","_XHR2","history","then","res","success","originDatas","concat","length","totalMoney","createTime","setState","prevState","myrank","innerLoading","originData","e","_this3","_this4","_react2","createElement","className","_loading2","txt","_Rscroller2","noLoader","noEmpty","onClick","map","item","index","key","src","headimgurl","alt","nickname","toFixed","style","marginTop","color","textAlign","fontSize","Component"],"mappings":"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","file":"4.87185d98.chunk.js","sourcesContent":["\nvar content = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/lib/index.js!../../../node_modules/sass-loader/lib/loader.js!./rank.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/lib/index.js!../../../node_modules/sass-loader/lib/loader.js!./rank.scss\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/lib/index.js!../../../node_modules/sass-loader/lib/loader.js!./rank.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".page-rank {\\n  padding: 0 15px; }\\n  .page-rank .normal-txt {\\n    color: #131314; }\\n  .page-rank .my-rank {\\n    text-align: center; }\\n  .page-rank .txt {\\n    font-size: 12px; }\\n  .page-rank .rank-no {\\n    text-align: center;\\n    color: #d54e3e;\\n    font-size: 24px; }\\n  .page-rank .rank-glance {\\n    padding: 20px 0;\\n    position: relative; }\\n    .page-rank .rank-glance:after {\\n      content: \\\" \\\";\\n      position: absolute;\\n      bottom: 0;\\n      left: -15px;\\n      right: -15px;\\n      border-bottom: 1px solid #eeeeee;\\n      -webkit-transform: scaleY(0.5);\\n              transform: scaleY(0.5); }\\n  .page-rank .rank-detail-data {\\n    padding: 20px 0 0 0;\\n    box-sizing: border-box;\\n    background-color: #ffffff; }\\n  .page-rank .internet-rank {\\n    margin-top: 20px; }\\n  .page-rank .rank-menu {\\n    display: -webkit-box;\\n    display: -webkit-flex;\\n    display: flex;\\n    -webkit-box-pack: center;\\n    -webkit-justify-content: center;\\n            justify-content: center; }\\n    .page-rank .rank-menu .active {\\n      background-color: #ffe5cc;\\n      color: #d54e3e;\\n      border-radius: 26px; }\\n    .page-rank .rank-menu .normal {\\n      background-color: #ffffff;\\n      color: #131314;\\n      border-radius: 0; }\\n  .page-rank .rank-menu_item {\\n    width: 80px;\\n    text-align: center;\\n    font-size: 12px;\\n    height: 26px;\\n    line-height: 26px; }\\n  .page-rank .rank-item {\\n    background-color: #ffe5cc;\\n    border-radius: 4px;\\n    position: relative;\\n    padding: 10px 12px;\\n    box-sizing: border-box;\\n    display: -webkit-box;\\n    display: -webkit-flex;\\n    display: flex;\\n    -webkit-box-align: center;\\n    -webkit-align-items: center;\\n            align-items: center;\\n    -webkit-box-pack: justify;\\n    -webkit-justify-content: space-between;\\n            justify-content: space-between;\\n    margin-top: 10px; }\\n    .page-rank .rank-item:first-of-type {\\n      margin-top: 0; }\\n  .page-rank .user-info {\\n    display: -webkit-box;\\n    display: -webkit-flex;\\n    display: flex;\\n    -webkit-box-align: center;\\n    -webkit-align-items: center;\\n            align-items: center;\\n    max-width: 160px; }\\n  .page-rank .earn-amount {\\n    -webkit-box-flex: 1;\\n    -webkit-flex: 1;\\n            flex: 1;\\n    color: #d54e3e;\\n    font-size: 14px;\\n    text-align: right;\\n    font-weight: bold; }\\n  .page-rank .user-name {\\n    color: #d54e3e;\\n    font-size: 13px;\\n    font-weight: bold;\\n    word-break: break-all; }\\n  .page-rank .user-avatar {\\n    width: 36px;\\n    height: 36px;\\n    border-radius: 100%;\\n    max-width: 36px;\\n    min-width: 36px;\\n    margin-right: 5px; }\\n  .page-rank .rank-tag {\\n    min-width: 28px;\\n    text-align: center;\\n    font-size: 12px;\\n    background-color: #d54e3e;\\n    color: #ffffff;\\n    border-radius: 4px;\\n    height: 18px;\\n    line-height: 18px;\\n    position: absolute;\\n    left: -8px;\\n    top: 8px;\\n    z-index: 10; }\\n  .page-rank .bottomloader {\\n    text-align: center;\\n    color: #666;\\n    padding: 15px 0;\\n    font-size: 14px;\\n    box-sizing: border-box; }\\n  .page-rank .list-data {\\n    position: relative; }\\n\", \"\"]);\n\n// exports\n","import Rscroller from '../components/Rscroller'\r\nimport React, { Component } from \"react\";\r\nimport XHR from '../XHR'\r\nimport '../static/styles/rank.scss'\r\nimport Loader from '../components/loading'\r\nexport default class RankList extends Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.state={\r\n            loading:true,\r\n            myRank:'',\r\n            datas:[\r\n                {\r\n                    users:[],\r\n                    last:false,\r\n                    loadMore:false,\r\n                    needLoader:true,\r\n                    query:{\r\n                        keywords: '',\r\n                        from: null,\r\n                        from2: null,\r\n                        size: 20\r\n                    },\r\n                    loaded:false\r\n                },\r\n                {\r\n                    users:[],\r\n                    last:false,\r\n                    loadMore:false,\r\n                    needLoader:true,\r\n                    query:{\r\n                        keywords: '',\r\n                        from: null,\r\n                        from2: null,\r\n                        size: 20\r\n                    },\r\n                    loaded:false\r\n                }\r\n            ],\r\n            tab:0\r\n        };\r\n        this.loadMoreData=this.loadMoreData.bind(this);\r\n        this.loadData=this.loadData.bind(this);\r\n        this.switchTab=this.switchTab.bind(this);\r\n    }\r\n    async componentDidMount(){\r\n        this.loadData({query:this.state.datas[this.state.tab].query,tab:this.state.tab+1},false)\r\n    }\r\n    loadData(requestObj,isLoadMore,cb){\r\n        XHR('rankData',requestObj,this.props.history)\r\n            .then(res=>{\r\n                if(res.success && res.users){\r\n                    let users=res.users;\r\n                    let originDatas=this.state.datas;\r\n                    if(isLoadMore){\r\n                        users=originDatas[this.state.tab].users.concat(users)\r\n                    }\r\n                    originDatas[this.state.tab].last=res.users.length<originDatas[this.state.tab].query.size;\r\n                    if(res.users.length>0){\r\n                        originDatas[this.state.tab].query.from=res.users[res.users.length-1].totalMoney;\r\n                        originDatas[this.state.tab].query.from2=res.users[res.users.length-1].createTime\r\n                    }\r\n                    if(this.state.tab===0 && users.length===100){\r\n                        originDatas[0].last=true;\r\n                        originDatas[0].needLoader=false\r\n                    }\r\n                    originDatas[this.state.tab].users=users;\r\n                    originDatas[this.state.tab].loadMore=false;\r\n                    originDatas[this.state.tab].loaded=true;\r\n                    this.setState(prevState=>({\r\n                        myRank:res.myrank,\r\n                        datas:originDatas,\r\n                        loading:false,\r\n                        innerLoading:false\r\n                    }));\r\n                }\r\n                cb && cb()\r\n\r\n            })\r\n    }\r\n    loadMoreData(){\r\n        if(!this.state.datas[this.state.tab].last){\r\n            let originData=this.state.datas;\r\n            originData[this.state.tab].loadMore=true;\r\n            this.setState({\r\n                datas:originData\r\n            });\r\n            this.loadData({query:this.state.datas[this.state.tab].query,tab:this.state.tab+1},true)\r\n        }\r\n    }\r\n    switchTab(e){\r\n        this.setState({\r\n            tab:e\r\n        },()=>{\r\n            if(this.state.datas[this.state.tab].users.length===0 && !this.state.datas[this.state.tab].loaded){\r\n                this.setState({\r\n                    innerLoading:true\r\n                });\r\n                this.loadData({query:this.state.datas[this.state.tab].query,tab:this.state.tab+1},false)\r\n            }\r\n        })\r\n    }\r\n    render(){\r\n        return(\r\n            <div className=\"page-rank\">\r\n                {this.state.loading ? <Loader txt={'加载中'}></Loader> :\r\n                    <Rscroller\r\n                        loadMore={!this.state.datas[this.state.tab].last}\r\n                        loading={this.state.datas[this.state.tab].loadMore}\r\n                        loadMoreData={this.loadMoreData}\r\n                        needLoader={this.state.datas[this.state.tab].needLoader}\r\n                        noLoader={!this.state.datas[this.state.tab].needLoader}\r\n                        noEmpty={this.state.datas[this.state.tab].users.length>0}\r\n                        loaded={this.state.datas[this.state.tab].loaded}\r\n                    >\r\n                        {this.state.innerLoading ?\r\n                            <Loader txt={'加载中'}></Loader> : null\r\n                        }\r\n                        <div className=\"rank-glance\">\r\n                            <div className=\"normal-txt txt my-rank\">我的排名</div>\r\n                            <div className=\"rank-no\">{this.state.myRank>10000 ? '10000+' : this.state.myRank}</div>\r\n                        </div>\r\n                        <div className=\"rank-detail-data\">\r\n                            <div className=\"rank-menu\">\r\n                                <div className={this.state.tab===0 ? 'rank-menu_item active' : 'rank-menu_item normal'} onClick={()=>this.switchTab(0)}>全网排名</div>\r\n                                <div className={this.state.tab===1 ? 'rank-menu_item active' : 'rank-menu_item normal'} onClick={()=>this.switchTab(1)}>朋友排名</div>\r\n                            </div>\r\n                            <div className=\"list-data\">\r\n                                <div className=\"internet-rank\">\r\n                                    {this.state.datas[this.state.tab].users.map((item,index)=>\r\n                                        <div className=\"rank-item\" key={index}>\r\n                                            <div className=\"user-info\">\r\n                                                <img src={item.headimgurl} className=\"user-avatar\" alt=\"\"/>\r\n                                                <div className=\"user-name\">{item.nickname}</div>\r\n                                            </div>\r\n                                            <div className=\"earn-amount\">{item.totalMoney.toFixed(2)}</div>\r\n                                            <div className=\"rank-tag\">{index+1}</div>\r\n                                        </div>\r\n                                    )}\r\n\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        {this.state.tab===0 && this.state.datas[0].users.length === 100 ?\r\n                            <div  className=\"bottomloader\">只显示前100</div> : null\r\n                        }\r\n                        {this.state.datas[this.state.tab].users.length === 0 &&  this.state.datas[this.state.tab].loaded ?\r\n                            <div style={{marginTop: 50,color:'#aaa',textAlign:'center',fontSize:12}}>暂无数据</div> : null\r\n                        }\r\n                    </Rscroller>\r\n                }\r\n\r\n            </div>\r\n\r\n        )\r\n    }\r\n}"],"sourceRoot":""}